function myClick(idStr,fun){var btn;document.getElementById(idStr).onclick=fun}function showError(elem,message){var error=elem.nextElementSibling;error.innerHTML=message,error.style.display="block"}function hideError(elem){var error=elem.nextElementSibling;error.innerHTML="",error.style.display="none",console.log(elem+"输入成功")}function delA(){var tr=this.parentNode.parentNode;confirm("是否删除"+tr.getElementsByTagName("td")[0].innerHTML)&&tr.parentNode.removeChild(tr)}var usernameReg=/^[A-z0-9\u4e00-\u9fa5]{4,}$/,passwordReg=/^(?![a-zA-Z.!@#$%^&*]+$)(?![a-z0-9.!@#$%^&*]+$)(?![A-Z0-9.!@#$%^&*]+$)(?![0-9A-z]+$)[0-9A-z.!@#$%^&*]{8,16}$/,emailReg=/^\w{3,}(\.\w+)*@[A-z0-9]+(\.[A-z]{2,5}){1,2}$/,phoneReg=/^1[3-9][0-9]{9}$/,wechatReg=/^[A-z][A-z0-9-_]{5,19}$/;window.onload=function(){for(var username=document.getElementById("username"),password=document.getElementById("password"),email=document.getElementById("email"),date=document.getElementById("date"),wechat=document.getElementById("wechat"),phone=document.getElementById("phone"),checkeAll=document.getElementById("checkedAllBox"),items=document.getElementsByName("items"),table=document.getElementById("Table"),allA=document.getElementsByTagName("a"),i=0;i<allA.length;i++)allA[i].onclick=delA;myClick("btnSubmit",(function(){if(!usernameReg.test(username.value))return showError(username,"用户名只能含有汉字、字母、数字"),!1;if(hideError(username),!passwordReg.test(password.value))return showError(password,"必须拥有至少一位大写字母、小写字母、特殊符号(.!@#$%^&*)以及数字，位数8位到16位"),!1;if(hideError(password),!emailReg.test(email.value))return showError(email,"邮箱格式错误！应为XXXXXX@XXX.XXX"),!1;if(hideError(email),!phoneReg.test(phone.value))return showError(phone,"电话号码格式错误"),!1;if(hideError(phone),!wechatReg.test(wechat.value))return showError(wechat,"微信号第一位必须是字母，只能使用字母数字下划线以及减号"),!1;if(hideError(wechat),0==date.value)return showError(date,"请输入日期"),!1;hideError(date);for(var str="",i=0;i<items.length;i++)items[i].checked&&(0==i?str+=items[i].value:str=str+" "+items[i].value);var tr=document.createElement("tr"),tbody;tr.innerHTML="<td>"+username.value+"</td><td>"+password.value+"</td><td>"+email.value+"</td><td>"+phone.value+"</td><td>"+wechat.value+"</td><td>"+date.value+"</td><td>"+str+"</td><td><a href='javascript:;'>Delete</a></td>",tr.getElementsByTagName("a")[0].onclick=delA,table.appendChild(tr),table.getElementsByTagName("tbody")[0].appendChild(tr)})),myClick("checkedAllBtn",(function(){for(var i=0;i<items.length;i++)items[i].checked=!0,checkeAll.checked=!0})),myClick("checkedNoBtn",(function(){for(var i=0;i<items.length;i++)items[i].checked=!1,checkeAll.checked=!1})),myClick("checkedRevBtn",(function(){checkeAll.checked=!0;for(var i=0;i<items.length;i++)items[i].checked=!items[i].checked,items[i].checked||(checkeAll.checked=!1)})),checkeAll.onclick=function(){for(var i=0;i<items.length;i++)items[i].checked=this.checked};for(var i=0;i<items.length;i++)items[i].onclick=function(){checkeAll.checked=!0;for(var j=0;j<items.length;j++)if(!items[j].checked){checkeAll.checked=!1;break}}};